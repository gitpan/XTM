<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>AsTMa (Asymptotic Topic Map Notation)</title>
    <link rel="stylesheet" href="astma.css" type="text/css">
  </head>


  <body background="draft.jpg">
    <h1>AsTMa, Asymptotic Topic Map Notation</h1>

    <p>
      v1.0, 2001-11-26<br>
      Revision 1.3
    <p>
      <a href="mailto:rho@bond.edu.au-spam.no">Robert (\rho) Barta</a><br>
      <A HREF="http://www.bond.edu.au/">Bond University</A><br>
    </p>

    <h2>Changes</h2>

    <ul>
      <li>relative to <a href="astma-1.html">v1.0 Rev.1.2</a>: 
	clarified the term AsTMa processor, 
	added semantics, 
	minor grammar corrections
      <li>relative to <a href="astma-0.999.html">v0.999</a>: added language definition, added language issues discussion
      <li>relative to <a href="astma-0.99.html">v0.99</a>: association types HAVE to be in () s now
    </ul>

    <h2>Contents</h2>

    <ul>
    <li><a href="#overview">0. Overview</a></li>
    <li><a href="#introduction">1. Introduction</a></li>
    <li><a href="#tutorial">2. Tutorial</a></li>
    <li><a href="#language-definition">3. Language Specification</a></li>
    <li><a href="#language-issues">4. Language Issues</a></li>
    <li><a href="#conclusions">5. Conclusions</a></li>
    <li><a href="#syntax">Appendix: Syntax</a></li>
    </ul>
      

    <h2><a name="overview">0. Overview</a></h2>

    <p>
      This document has no formal status. It is a technical report of the local university.
    </p>
    <p>
      After an introduction and motivation, we present the core concepts in a short tutorial, before turning
      to formal language specification.
    <p>
      You can find the running example used throughout the tutorial at 
      the <A HREF="http://topicmaps.bond.edu.au/examples/">Bond Topicmap Server</A>. You might want to
      peruse an <a href="http://topicmaps.bond.edu.au/astma/atm.mc">online converter</a>.
    </p>

    <h2><a name="introduction">1. Introduction</a></h2>

    <p>
      Since the stabilisation of <A HREF="http://www.topicmaps.org/xtm/">XTM</A>, an XML-based 
      notation for <A HREF="http://www.topicmaps.org/">Topic Maps</A>, the interest in authoring Topic Maps
      has increased.
    <p>
      While the automatic generation of topic maps from backend databases into XTM can easily be achieved, 
      manual authoring is tedious and error-prone. One option is to use XML aware development tools, such as
      XML-editors. While feasible, generic XML editors offer little help above syntactical conformance.
      Another option is to use integrated development environments for Topic Maps (server or client-side) as
      they appear in the market.
    <p>
      AsTMa is a linear, textual notation for Topic Map information. The motivation was
      to create an <strong>authoring</strong> shorthand notation in contrast to
      <A HREF="http://www.topicmaps.org/xtm/">XTM</A> which is suitable for interchange purposes.
      AsTMa has the following design objectives:
    <p>
    <dl>
      <dt>Minimum of effort:</dt>
      <dd>A converter should be able to <i>interpret</i> the intention of the author in a specific context reducing the
	verbosity of the language.</dd>
      <dt>Minimal use of special characters and keywords:</dt>
      <dd>Banning of [(&^%$}] delimiters should increase the usability of the language. This also reduces the need to
	escape these special characters once they belong to the information.</dd>
      <dt>Asymptotic regarding to XTM:</dt>
      <dd>The language should not have a built-in <i>syntax-soound-barrier</i> making it impossible to reach the same
	expressiveness as XTM.</dd>
      <dt>Keep things together:</dt>
      <dd>The author should not be forced to split up (topic) information into several fragments, which have
        to be <A HREF="http://www.topicmaps.org/xtm/1.0/#def-topic-naming-constraint">merged via TNC</A> by a 
	followup Topic Map processing stage.</dd>
    </dl>

    <p>
      At this stage AsTMa does not fulfill all of the above objectives.
      As outlined in more detail in the <A HREF="#conformance">section about conformance</A>, AsTMa
      is (yet) not as expressive as XTM, that not having been a prime concern. Still, AsTMa is
      sufficiently rich to prototype medium sized topic maps.

    <h2><a name="tutorial">2. Tutorial</a></h2>

    <p>
      The following setting assumes that the AsTMa text will be either directly understood by a particular
      Topic Map processing software or that a specialized processor will first convert the AsTMa text stream
      into an XTM stream.
    </p>

    <h3>2.1 Basics</h3>

    AsTMa is line oriented. This means that pertinent information is terminated with the end of the line. A single
    line containing

    <pre class="astma">
   filesystem (software)
</pre>

    <p>
      already defines a topic (as explained below). If there is more to a topic (or an association) this information
      will be on follow-up lines:

    <pre class="astma">
   filesystem (software)
   bn: File System
</pre>

    <p>
      An empty line, thus, separates items like topic and associations. On any line white-spaces can be used
      before and after keywords and special characters. They are silently ignored.
    <p>
      Any line also can contain comment like
    </p>

    <pre class="astma">
   filesystem (software) # more information will follow
</pre>

    <p>
    Such comments will be discarded by any processor and are only for <i>internal</i> documentation purposes. If you 
    would like to have a comment in the processor output, then this comment MUST begin at the start of a line:
    </p>
    
    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
    <pre class="astma">
# I will survive and (hopefully) 
#     the line structure will not
#        be broken
</pre>
        </td>
	<td>
	  <pre class="xtm">
&lt;!--  I will survive and (hopefully)
          the line structure will not
             be broken --&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      Comments on consecutive lines will be treated as one comment. Any non-comment line
      signals the end of such a group. Also, any '--&gt;' occurrence within a comment will be
      converted into '--_ &gt;', interspersing one underscore character
    </p>

    <h3>2.2 Topics</h3>

    The line

    <pre class="astma">
   filesystem (software)
</pre>

    <p>
      indicates the definition of topic with id <kbd>filesystem</kbd> which is an instance of another topic, <kbd>software</kbd>:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
filesystem (software)
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="filesystem"&gt;
   &lt;instanceOf&gt;
     &lt;topicRef xlink:href="#software"/&gt;
   &lt;/instanceOf&gt;
   &lt;baseName&gt;
     &lt;baseNameString&gt;filesystem&lt;/baseNameString&gt;
   &lt;/baseName&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      As we did not provide a base name, the topic id <kbd>filesystem</kbd> is also assumed to be the topic's 
      basename. While this   heuristic approach works fine for some words, it does not well with others, say, 
    </p>

<pre class="astma">
   linux-distribution (software)
</pre>

    <p>
      Any AsTMa processor is free to apply any other heuristics, such as:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
linux-distribution (software)
</pre>
	</td>
	<td>
<pre class="xtm">
&lt;topic id="linux-distribution"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#software"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;linux distribution&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      substituting dashes by blanks, looking up 3rd-party databases or leaving it as it is. Of course,
      the author can enforce a particular base name:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
RedHat-Linux-sparc (linux-distribution-port)
bn: RedHat Linux for SPARC
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="RedHat-Linux-sparc"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#linux-distribution-port"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;RedHat Linux for SPARC&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      On a similar take, you can also add occurrences for topics:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
linux (os)
bn: Linux kernel
oc: http://www.kernel.org/
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="linux"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#os"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;Linux kernel&lt;/baseNameString&gt;
  &lt;/baseName&gt;
  &lt;occurrence&gt;
    &lt;resourceRef xlink:href="http://www.kernel.org/"/&gt;
  &lt;/occurrence&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      in the case for resource references or also for inline data (XTM resourceData):
    </p>
    
    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
linux-port-on-sparc (linux-port)
bn: SPARC Linux port
oc: http://www.sparc.org/linux.shtml
in: The kernel and kernel modules \
    are 64-bit on sparc64, \
    userland is still 32-bit, \
    and in fact the same as on sparc32.
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="linux-port-on-sparc"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#linux-port"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;SPARC Linux port&lt;/baseNameString&gt;
  &lt;/baseName&gt;
  &lt;occurrence&gt;
    &lt;resourceRef xlink:href="http://www.sparc.org/linux.shtml"/&gt;
  &lt;/occurrence&gt;
  &lt;occurrence&gt;
    &lt;resourceData&gt;The kernel and kernel mod....&lt;/resourceData&gt;
&lt;/occurrence&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      If appropriate, you can also type topic characteristics:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
reiserfs (filesystem)
bn: Reiser File System, ReiserFS
oc (download): http://www.namesys.com/download.html
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="reiserfs"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#filesystem"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;Reiser File System, ReiserFS&lt;/baseNameString&gt;
  &lt;/baseName&gt;
  &lt;occurrence&gt;
    &lt;instanceOf&gt;
       &lt;topicRef xlink:href="#download"/&gt;
    &lt;/instanceOf&gt;
    &lt;resourceRef xlink:href="http://www.namesys.com/download.html"/&gt;
  &lt;/occurrence&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      To scope a characteristic you use '@' to introduce a particular context:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
RedHat-Linux-sparc (linux-distribution-port)
bn: RedHat Linux for SPARC
bn @ deutsch : RedHat Linux f&uuml;r SPARC
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;topic id="RedHat-Linux-sparc"&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#linux-distribution-port"/&gt;
  &lt;/instanceOf&gt;
  &lt;baseName&gt;
     &lt;baseNameString&gt;RedHat Linux for SPARC&lt;/baseNameString&gt;
  &lt;/baseName&gt;
  &lt;baseName&gt;&lt;scope&gt;&lt;topicRef xlink:href="#deutsch"/&gt;&lt;/scope&gt;
     &lt;baseNameString&gt;RedHat Linux f&uuml;r SPARC&lt;/baseNameString&gt;
  &lt;/baseName&gt;
&lt;/topic&gt;
</pre>
	</td>
      </tr>
    </table>

    <h3>2.3 Associations</h3>

    <p>
      Associations may or may not have a particular association type. This topic type is provided inside
      a () pair.
    <pre class="astma">
(kernel-patch-provides-feature)
...
</pre>
    If the association has no explicit type, it can be omitted, by writing <kbd>()</kbd>.
    <p>
      Associations also have a number of members playing roles:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
(kernel-patch-provides-feature)
feature: reiserfs
platform: i386
patch:   generic-reiserfs-patch-2.4.x
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;association&gt;
  &lt;instanceOf&gt;
    &lt;topicRef xlink:href="#kernel-patch-provides-feature"/&gt;
  &lt;/instanceOf&gt;
  &lt;member&gt;
     &lt;roleSpec&gt;
       &lt;topicRef xlink:href="#feature"/&gt;
     &lt;/roleSpec&gt;
     &lt;topicRef xlink:href="#reiserfs"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
     &lt;roleSpec&gt;
       &lt;topicRef xlink:href="#platform"/&gt;
     &lt;/roleSpec&gt;
     &lt;topicRef xlink:href="#i386"/&gt;
  &lt;/member&gt;
  &lt;member&gt;
     &lt;roleSpec&gt;
       &lt;topicRef xlink:href="#patch"/&gt;
     &lt;/roleSpec&gt;
     &lt;topicRef xlink:href="#generic-reiserfs-patch-2.4.x"/&gt;
  &lt;/member&gt;
&lt;/association&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      For better readability you may want to indent the roles
    </p>
    <pre class="astma">
  (kernel-patch-provides-feature)
      feature: reiserfs
      platform: i386
      patch:   generic-reiserfs-patch-2.4.x
</pre>

    <h3>2.4 Topic Maps</h3>

    <p>
      The <strong>very first non-empty line within the document</strong> MUST  provide 
      a name (identifier) of the topic map itself:
    </p>
 
    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td >
	  <pre class="astma">
sparclinux : iso-8859-1
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;?xml version="1.0" encoding="iso-8859-1"?&gt;
&lt;topicMap id="sparclinux"
          xmlns       = 'http://www.topicmaps.org/xtm/1.0/'
          xmlns:xlink = 'http://www.w3.org/1999/xlink'&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>Optionally, you can specify an particular encoding, like in the example above. If not provided,  the
      encoding defaults to iso-8859-1.
    </p>

    <h3>2.5 Macros</h3>
    
    <p>
      For authors who have no access to a general macro expansion environment, the language
      supports a rudimentary macro facility which comes handy when to abbreviate long strings. The
      idea is to first declare a macro via
    </p>

    <pre class="astma">
  de=http://www.topicmaps.org/xtm/1.0/language.xtm#de
</pre>

    <p>
      somewhere towards the beginning of the document and then use this definition for, say,
      scoping:
    </p>

    <table border="1" width="90%">
      <tr><th>AsTMa</th><th>XTM</th></tr>
      <tr>
	<td>
	  <pre class="astma">
oc @ &de; (press-release) : http://www....
</pre>
	</td>
	<td>
	  <pre class="xtm">
&lt;occurrence&gt;
  &lt;scope&gt;&lt;topicRef xlink:href="http://www.topicmaps.org/xtm/1.0/language.xtm#de"/&gt;&lt;/scope&gt;
  &lt;instanceOf&gt;
     &lt;topicRef xlink:href="#press-release"/&gt;
  &lt;/instanceOf&gt;
  &lt;resourceRef xlink:href="http://www.s...."/&gt;
&lt;/occurrence&gt;
</pre>
	</td>
      </tr>
    </table>

    <p>
      Every instance of <kbd>&amp;de;</kbd> throughout the document will be expanded by the above URL. 
    </p>
    <p>
      While these macros cannot have parameters, they will be evaluated recursively, i.e. macros can contain other
      macros.
    </p>

    <p>
      It goes without saying that the notation <kbd>&amp;...;</kbd> may collide with other
      XML entities. It lies in the responsibility of the author to take care of that.
    </p>

    <h2><a name="language-definition">3. Language Specification</a></h2>

    <p>
      In the following we use grammars (extended BNFs) and 
      <a href="http://etext.lib.virginia.edu/helpsheets/regex.html">regexps</a> (regular expressions) to define the
      syntax of an AsTMa instance.
    </p>
    <p>
      As AsTMa is line-oriented, we introduce <kbd>eol</kbd> as special terminal to symbolize the end of the line
      (or the end of the text stream, for that matter). AsTMa processors use the start and the end of a line
      as a natural boundary of AsTMa purported information. If for some reason, say readability, a line n has to be broken
      into several lines, the backslash character <kbd>\</kbd> at the very end of a line n indicates that the followup line
      n+1 logically belongs to n.
    <p>
      Example:
      
    <blockquote><pre class="astma">
bn: this line is too long, so\
    we continue it on the next line
</pre></blockquote>

    <p>
      If we allow any number of white spaces to occur on a
      specific point in the
      grammar, the we symbolize this as <kbd>ws*</kbd>. If we require at least one white space to appear
      somewhere, then we use <kbd>ws+</kbd> to denote this.
      Before and after terminals (keywords and special characters), white-spaces can be used freely while
      this is not made explicit in the grammar productions. Moreover, any text is stripped off white-spaces 
      on its beginning and its end:
    <p>

    <blockquote>
      <em>string</em> --&gt; [ ws* ] { <em>character</em> } [ ws* ]
    </blockquote>

    <p>
      In many cases topic identifiers will be used to refer to other topics. To underline <em>what kind</em>
      of topic is expected in specific cases (without enforcing this with an AsTMa processor) the syntax uses
      <em>typed</em> non-terminals, like <em>role-topic-id</em> or <em>type-topic-id</em>.
    </p>

    <h3>3.1 Definitions</h3>

    <dl>
      <dt>AsTMa instance
      <dd>An AsTMa instance is any (linear) text which follows the rules given in this specification. Such a
	text can reside
	in a file on a file system or can also be created on the fly from an external data source.
      <dt>AsTMa processor
      <dd>An AsTMa processor is any program which is capable to parse and process an AsTMa instance.
	For the sake of the following definition, it is assumed that the processor will convert an AsTMa instance into an
	equivalent XTM instance, furtheron referred to as the <em>virtual XTM instance</em>. The following semantic definition
	of AsTMa is based on this transformation and not on a Topic Map processing model which is developed at
	the time of writing.
	<p>
	  A real AsTMa processor is free to skip the transformation step and to directly load AsTMa instances as long
	  as this process is equivalent.
    </dl>



    <h3><a name="overallstructure">3.2 Overall Structure</a></h3>

    An AsTMa instance has the following structure:
    
    <blockquote>
      <em>instance</em> --&gt; { <em>comment-section</em> } <em>name-encode-section</em> { <em>section</em> }<br>
      <em>section</em> --&gt; <em>comment-section</em> | <em>topic-definition-section</em> | <em>association-definition-section</em> | <em>macro-definition-section</em>
    </blockquote>

    An AsTMa processor has to honor the following processing constraints:

    <ul>
      <li>The order of above components SHOULD NOT be relevant with the exception of macro definition sections.
	With these, a processor should interpret them in lexicographical order. At any given line of the AsTMa
	instance, there exists then an effective set of macro definitions.</li>
      <li>An AsTMa processor MAY decline the processing of macros.</li>
      <li>An AsTMa processor MAY issue warnings when topic ids are referenced but are never defined as part of
      a topic definition. AsTMa processor also may automatically define these topics with reasonable defaults.</li>
    </ul>

    <h3><a name="naming">3.3 Naming and Encoding</a></h3>

    Any AsTMa instance has to be named by a string matching [^\S]+ (anything not containing white spaces).
    It is up to the AsTMa processor how this name will be utilized.
    <p>
      Example:
    <blockquote><pre class="astma">
linux: iso-8859-1
</pre>
      The instance will be called <em>linux</em> and the used encoding will be <em>iso-8859-1</em>.
    </blockquote>

    <blockquote>
      <em>name-encode-section</em> --&gt; <em>name</em> [ ':' <em>encoding</em> ] eol
    </blockquote>

    A particular AsTMa instance is a character string in a particular character encoding. The
    AsTMa processor transparently passes all characters to the equivalent virtual XTM instance. To make this 
    happen, an AsTMa instance has to specify at the begining of the stream the appropriate character encoding. 
    This encoding will also be the XML encoding used in the virtual XTM instance. The <em>name</em> will become
    the value of the ID attribute <a href="http://www.topicmaps.org/xtm/index.html#syn-topicmap">topic map</a> declaration.

    <h3><a name="comments">3.4 Comments</a></h3>

    <p>
      A <em>global comment section</em> is introduced by a <kbd>#</kbd> at the very beginning of a line. Any following
      text (i.e. starting with the 2nd column) is regarded to be comment text. Any directly subsequent line which also
      begins with a <kbd>#</kbd> is accumulated into the comment. A global comment section is terminated by the
      begin of some other top level section or an empty line.
    <p>
      It is up to the AsTMa processor to process comments. When converting into XTM, the processor may
      create XML comment sections, when directly loading it for other purposes the comment may be discarded.
    <p>
      Example:
    <blockquote><pre class="astma">
# warning from the information secretary
# Linux is a communist conspiration against the free Microsoft world
</pre>
      The comment contains two lines, the <kbd>#</kbd>s themselves are discarded.
    </blockquote>

    <blockquote>
      <em>comment-section</em> --&gt; { '#' <em>string</em> eol }
    </blockquote>

    A <em>local comment</em> is introduced by a <kbd>#</kbd> NOT at the beginning of the line. Local comments reach until
    the end of the current line and are discarded by AsTMa processors.

    <h3><a name="topics">3.5 Topics</a></h3>

    A topic definition section follows the syntax

    <blockquote>
      <em>topic-definition</em> --&gt; <em>topic-id</em> [ '(' <em>list-of-type-topic-ids</em> ')' ] eol { ws* <em>topic-characteristic</em> eol } 
    </blockquote>

    <p>
      The <em>topic-id</em> stands for the topic identifier which HAS to be provided. This identifier
      SHOULD follow the <a href="http://www.w3.org/TR/2000/REC-xml-20001006#NT-Name">XML identifier rules</a>
      although an AsTMa processor might not directly enforce this.
    <p>
      The topic identifier itself has to be placed at the beginning of the line; if the optional list
      of identifiers inside '()' is specified, the topic identifiers mentioned therein are interpreted as <em>types</em>
      of that topic. The list entries are separated by one (or more) white spaces:
      
    <blockquote>
      <em>list-of-topic-ids</em> --&gt; <em>topic-id</em> { ws+ <em>topic-id</em> }
    </blockquote>

    <p>
      Example:

    <blockquote><pre class="astma">
linux (operating-system-technology open-source-software)
...
</pre>
Defines a topic with id <kbd>linux</kbd> and with two types.
</blockquote>

    <p>
      Every topic definition will result in a <a href=""><em>topic</em> element</a> in the
      virtual XTM instance. The <em>topic-id</em> will be used as value for the ID attribute.
      For every topic type an <a href="http://www.topicmaps.org/xtm/index.html#elt-instanceOf">instanceOf element</a>
      will be generated inside this topic containing a <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef
      element</a> with the xlink:href attribute having the value of the type id.
    
    
    <h3><a name="topiccharacteristics">3.6 Topic characteristics</a></h3>

    <p>
      Any topic definition section can contain any number of topic characteristics. They have to directly follow
      the start of a topic definition section, the order is irrelevant, though. Every such characteristic is indicated
      by a (case sensitive) keyword, followed by scoping and/or typing information (if appropriate),
      a colon (<kbd>:</kbd>) and the value for this particular characteristic. To improve readibility, before the keyword
      white spaces are allowed.
      <p>
      Example:
    <blockquote><pre class="astma">
linux (operating-system-technology open-source-software)
  bn: Linux Operating System
  oc (download): http://www.linux.org/
</pre>
Defines a topic with id <kbd>linux</kbd> with an explicit base name and a typed occurrence.
</blockquote>

      <p>
      Following defaults are used for a topic in the case there is no explicit characteristic defined:

    <ul>
      <li>If no unscoped <em>baseName</em> characteristic is defined, then the topic identifier will be used. The AsTMa
	processor is free to prettify this string for better readability.</li>
      <li>If no type list is supplied or if the list is empty the AsTMa processor should conform 
	to <a href="http://www.topicmaps.org/xtm/index.html">XTM</a>.
      </li>
    </ul>

    All topic characteristics result in the generation of an appropriate XTM element inside the current topic
    element of the virtual XTM instance:

    <blockquote>
      <em>topic-characteristic</em> --&gt; <em>basename-characteristic</em> | <em>resourceRef-characteristic</em> | <em>resourceData-characteristic</em>
    </blockquote>

    <dl>
      <dt><b>baseName</b></dt>
      <dd>A (scoped) base name can be defined via
	<blockquote>
	  <em>basename-characteristic</em> --&gt; 'bn' [ '@' <em>scope-topic-id</em> ] ':' <em>string</em>
	</blockquote>
	The <em>string</em> will be used 'as-is' for the text content of the 
	<a href="http://www.topicmaps.org/xtm/index.html#elt-baseNameString">baseNameString element</a> inside
	<a href="http://www.topicmaps.org/xtm/index.html#elt-baseName">baseName element</a> of the
	virtual XTM instance. If a scope topic id
	exists, then this id will be used as value for the attribute xlink:href for a 
	<a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a>
	inside a <a href="http://www.topicmaps.org/xtm/index.html#elt-scope">scope element</a> inside above baseName element.
      </dd>
      <dt><b>resourceRef occurrence</b></dt>
      <dd>A (scoped and/or typed) resourceRef occurrence is defined with
	<blockquote>
	  <em>resourceRef-characteristic</em> --&gt; 'oc' [ '@' <em>scope-topic-id</em> ] [ '(' <em>type-topic-id</em> ')' ]':' <em>string</em>
	</blockquote>
      The <em>string</em> SHOULD be a valid URI. An AsTMa processor might perform checks on this URL.
	<p>
	  For each resource occurrence, in the virtual XTM instance a 
	  <a href="http://www.topicmaps.org/xtm/index.html#elt-resourceRef">resourceRef element</a> will be created
	  with the <em>string</em> being used as xlink:href attribute. That element will be nested inside a
	  <a href="http://www.topicmaps.org/xtm/index.html#ex-occurrence">occurrence element</a> inside the current 
	  topic element.
	<p>
	  If a scope topic id is provided, then this id will be used as value for the attribute xlink:href for a 
	  <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a>
	  inside a <a href="http://www.topicmaps.org/xtm/index.html#elt-scope">scope element</a> inside the
	  above occurrence element.
	  <p>
	  If a type topic id is provided, then this id will be used as value for the attribute xlink:href for a 
	  <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a>
	  inside a <a href="http://www.topicmaps.org/xtm/index.html#elt-instanceOf">instanceOf element</a>
	  inside the above occurrence element.
      </dd>
      <dt><b>resourceData occurrence</b></dt>
      <dd>A (scoped and/or typed) resourceData occurrence is defined with
	<blockquote>
	  <em>resourceData-characteristic</em> --&gt; 'in' [ '@' <em>scope-topic-id</em> ] [ '(' <em>type-topic-id</em> ')' ]':' <em>string</em>
	</blockquote>
	The <em>string</em> will be used 'as-is' as text inside a
	<a href="http://www.topicmaps.org/xtm/index.html#elt-resourceData">resourceData element</a> inside an
	<a href="http://www.topicmaps.org/xtm/index.html#ex-occurrence">occurrence element</a> inside the current 
	topic element.
	<p>
	  If a scope topic id is provided, then this id will be used as value for the attribute xlink:href for a 
	  <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a>
	  inside a <a href="http://www.topicmaps.org/xtm/index.html#elt-scope">scope element</a> inside the
	  above occurrence element.
	  <p>
	  If a type topic id is provided, then this id will be used as value for the attribute xlink:href for a 
	  <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a>
	  inside a <a href="http://www.topicmaps.org/xtm/index.html#elt-instanceOf">instanceOf element</a>
	  inside the above occurrence element.
      </dd>
    </dl>

    <h3><a name="associations">3.7 Associations</a></h3>

    An association definition section follows the syntax

    <blockquote>
      <em>association-definition</em> --&gt; '(' [ <em>association-type-topic-id</em> ] ')' eol { ws* <em>association-member</em> eol }
    </blockquote>

    <p>
      Example:
      
    <blockquote><pre class="astma">
(kernel-patch-provides-feature)
   feature:  reiserfs
   platform: i386
   patch:    generic-reiserfs-patch-2.4.x
</pre>
      This defines an association of type <em>kernel-patch-provides-feature</em> with three roles <em>feature</em>, 
      <em>platform</em> and <em>patch</em>.
    </blockquote>

    <p>
      At most one topic identifier can occur as association type. If not provided the XTM default will be
      assumed
    <p>
      Association members are defined line-by-line according to

    <blockquote>
      <em>association-member</em> --&gt; <em>role-topic-id</em> ':' { <em>member-topic-id</em> }
    </blockquote>

    In the virtual XTM instance for every association definition in AsTMa, an 
    <a href="http://www.topicmaps.org/xtm/index.html#elt-association">association element</a> will be created 
    inside the current topic map. Every member will result in the creation of a
    <a href="http://www.topicmaps.org/xtm/index.html#elt-member">member element</a> inside this association
    element.
    <p>
      The <em>role-topic-id</em> will be used as the value of the xlink:href attribute of an
      <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a> inside a
      <a href="http://www.topicmaps.org/xtm/index.html#elt-roleSpec">roleSpec element</a> inside the member.
    <p>
      Every single <em>member-topic-id</em> is used as the value of the xlink:href attribute of a
      <a href="http://www.topicmaps.org/xtm/index.html#elt-topicRef">topicRef element</a> inside the member.

    <h3><a name="macros">3.8 Macros</a></h3>

    <p>
      Macros are an ad-hoc facility to abbreviate frequent strings and resemble as such SGML entities. AsTMa 
      processors MAY
      directly implement this or also MAY use external mechanisms not covered inside AsTMa for macro processing.
    <p>
      A macro is defined via

    <blockquote>
      <em>macro-definition</em> --&gt; <em>macro-name</em> '=' <em>string</em> eol
    </blockquote>

    and basically binds a string value to a name. This name, in turn, can be used in subsequent
    AsTMa definitions like an entity reference:
    
    <blockquote>
      <em>macro-reference</em> --&gt; '&' <em>macro-name</em> ';'
    </blockquote>

    Macros can contain other macros, it is up to the AsTMa processor to warn about the existence of circular definitions.

    <h2><a name="language-issues">4. Language Issues</a></h2>

    <dl>
      <dt>Completeness</dt>
      <dd>The language is far from being complete relative to the expressiveness of XTM. At a second thought, 
	though, the expressiveness of XTM is not necessarily the ultimate goal. In the same way
	as XTM lacks all kinds 	of <A HREF="http://www.ontopia.net/topicmaps/materials/tm-schemas-paper.pdf">application specific constraints</A>, 
	AsTMa currently only covers the authoring aspect of TM processing.
	<p>
	  Having a separate (not standardized) language opens then venue, though, for developing AsTMa into
	  a constraint or even into a query and manipulation language.</dd>
      <dt>Border cases</dt>
      <dd>There are - due to the declarativeness of the language - some cases in which AsTMa processors may produce
          non-intuitive results, depending on the implementation approach taken.</dd>
      <dt>Relationship to <a href="http://www.ontopia.net/download/ltm.html">LTM</a></dt>
      <dd>The existence of LTM itself has shown that there is definitely a need for a textual notation for authors
      who are used to the expressiveness of textual user interfaces. Although LTM may have some shortcomings
       relative to AsTMa, it might prove valuable in other contexts. So, for instance, is it not possible in
       AsTMa to define topics directly within an association, whereas AsTMa's line orientedness is more convenient in text
       editors or when fighting along the sed-awk-perl-grep monsters.</dd>
	
    </dl>
    </p>

    <h2><a name="conclusions">5. Conclusions</a></h2>

    First experiences with the language have shown that most parsing situations can be disambiguated by
    a AsTMa processor. Following unresolved issues exist:

    <ul>
      <li>currently we only cover syntax and  informal semantics, map to processing model?
      <li>variants cannot be expressed yet</li>
      <li>resource refs, indicators cannot be expressed yet.</li>
      <li>
	<p>
	  special character in id, encoding according to www.isi.edu/in-notes/iana/assignments/character-sets, 
	  causal stream, no implicit merging (not even with ids)
	  <br>
	  conformant converter is free to produce any additional topic/assocs appropriate??
	  <br>
	  in terms of an abstract pattern processor?
	  <br>
	  causal streams (really?) , performance at bigger maps
	  <br>
	  specifying additional behavior? auto complete, defaults for assocs (types?)
	</p>
    </ul>

    <h2><a name="credits">Credits</a></h2>

    <ul>
    <li>Lars M. Garhol (influences from <a target="alien" href="http://www.ontopia.net/download/ltm.html">LTM</a>)
    </ul>

    <h2><a name="syntax">Appendix: Syntax</a></h2>

    <blockquote>
      <em>instance</em> --&gt; { <em>comment-section</em> } <em>name-encode-section</em> { <em>section</em> }
      <br>
      <em>comment-section</em> --&gt; { '#' <em>string</em> eol }
      <br>
      <em>name-encode-section</em> --&gt; <em>name</em> [ ':' <em>encoding</em> ] eol
      <br>

      <em>section</em> --&gt; <em>comment-section</em> | <em>topic-definition-section</em> | <em>association-definition-section</em> | <em>macro-definition-section</em>
      <br>

      <em>topic-definition</em> --&gt; <em>topic-id</em> [ '(' <em>list-of-type-topic-ids</em> ')' ] eol { ws* <em>topic-characteristic</em> eol } 
      <br>
      <em>topic-characteristic</em> --&gt; <em>basename-characteristic</em> | <em>resourceRef-characteristic</em> | <em>resourceData-characteristic</em>
      <br>
      <em>basename-characteristic</em> --&gt; 'bn' [ '@' <em>scope-topic-id</em> ] ':' <em>string</em>
      <br>
      <em>resourceRef-characteristic</em> --&gt; 'oc' [ '@' <em>scope-topic-id</em> ] [ '(' <em>type-topic-id</em> ')' ]':' <em>string</em>
      <br>
      <em>resourceData-characteristic</em> --&gt; 'in' [ '@' <em>scope-topic-id</em> ] [ '(' <em>type-topic-id</em> ')' ]':' <em>string</em>
      <br>
      <em>association-definition</em> --&gt; '(' [ <em>association-type-topic-id</em> ] ')' eol { ws* <em>association-member</em> eol }
      <br>
      <em>association-member</em> --&gt; <em>role-topic-id</em> ':' { <em>member-topic-id</em> }
      <br>
      <em>macro-definition</em> --&gt; <em>macro-name</em> '=' <em>string</em> eol
      <br>



      <em>list-of-topic-ids</em> --&gt; <em>topic-id</em> { ws+ <em>topic-id</em> }
      <br>
      <em>string</em> --&gt; [ ws* ] { <em>character</em> } [ ws* ]
      <br>
      <em>name</em> --&gt; ... any identifier not containing blanks
    </blockquote>



    <hr>
    <address>&copy; 2001 <a href="mailto:rho@bond.edu.au-spam.no">Robert Barta</a>, Bond University</address>
  </body>
</html>
